/**
 * Angular directive/filter/service for formatting date so that it displays how long ago the given time was compared to now.
 * @version v0.4.6 - 2019-08-16
 * @link https://github.com/yaru22/angular-timeago
 * @author Brian Park <yaru22@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

"use strict";angular.module("yaru22.angular-timeago",[]),angular.module("yaru22.angular-timeago").factory("nowTime",["$interval","timeAgo","timeAgoSettings",function(e,r,n){function o(){t=Date.now()}var t;return o(),e(o,n.refreshMillis),function(){return t}}]),angular.module("yaru22.angular-timeago").constant("timeAgoSettings",{refreshMillis:1e3,allowFuture:!1,overrideLang:null,fullDateAfterSeconds:null,strings:{},breakpoints:{secondsToMinute:45,secondsToMinutes:90,minutesToHour:45,minutesToHours:90,hoursToDay:24,hoursToDays:42,daysToMonth:30,daysToMonths:45,daysToYear:365,yearToYears:1.5}}),angular.module("yaru22.angular-timeago").directive("timeAgo",["timeAgo","nowTime",function(e,r){return{scope:{fromTime:"@",format:"@"},restrict:"EA",link:function(n,o){var t;n.$watch("fromTime",function(){t=null,n.fromTime&&(t=e.parse(n.fromTime))}),n.$watch(function(){return t?r()-t:null},function(r){var a="";r&&(a=e.inWords(r,t,n.format)),angular.element(o).text(a)})}}}]),angular.module("yaru22.angular-timeago").factory("timeAgo",["$filter","timeAgoSettings",function(e,r){var n={};return n.inWords=function(n,o,t,a){function u(e,r){r=Math.round(r);var o=angular.isFunction(e)?e(r,n):e,t=l.numbers&&l.numbers[r]||r;return o.replace(/%d/i,t)}var i=parseInt(r.fullDateAfterSeconds,10);if(!isNaN(i)){var s=1e3*i;if(n>=0&&s<=n||n<0&&s>=n)return t?e("date")(o,t,a):o}var m,l,f=r.overrideLang,d=document.documentElement.lang,c=r.strings;void 0!==c[f]?(m=f,l=c[f]):void 0!==c[d]?(m=d,l=c[d]):l=c[m="en_US"];var g=l.prefixAgo,T=l.suffixAgo;r.allowFuture&&n<0&&(g=l.prefixFromNow,T=l.suffixFromNow);var y=Math.abs(n)/1e3,p=y/60,h=p/60,v=h/24,w=v/365,A=r.breakpoints,M=y<A.secondsToMinute&&u(l.seconds,y)||y<A.secondsToMinutes&&u(l.minute,1)||p<A.minutesToHour&&u(l.minutes,p)||p<A.minutesToHours&&u(l.hour,1)||h<A.hoursToDay&&u(l.hours,h)||h<A.hoursToDays&&u(l.day,1)||v<A.daysToMonth&&u(l.days,v)||v<A.daysToMonths&&u(l.month,1)||v<A.daysToYear&&u(l.months,v/30)||w<A.yearToYears&&u(l.year,1)||u(l.years,w),D=void 0===l.wordSeparator?" ":l.wordSeparator;return"he_IL"===m?[g,T,M].join(D).trim():[g,M,T].join(D).trim()},n.parse=function(e){if(e instanceof Date)return e;if("undefined"!=typeof moment&&moment.isMoment(e))return e.toDate();if(angular.isNumber(e))return new Date(e);if(/^\d+$/.test(e))return new Date(parseInt(e,10));var r=(e||"").trim();return r=r.replace(/\.\d+/,""),r=r.replace(/-/,"/").replace(/-/,"/"),r=r.replace(/T/," ").replace(/Z/," UTC"),r=r.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(r)},n}]),angular.module("yaru22.angular-timeago").filter("timeAgo",["nowTime","timeAgo",function(e,r){function n(n,o,t){if(n){var a=r.parse(n),u=e()-a;return r.inWords(u,a,o,t)}return null}return n.$stateful=!0,n}]);