/**
 * Angular directive/filter/service for formatting date so that it displays how long ago the given time was compared to now.
 * @version v0.4.6 - 2019-08-17
 * @link https://github.com/yaru22/angular-timeago
 * @author Brian Park <yaru22@gmail.com>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */

"use strict";angular.module("yaru22.angular-timeago",[]),angular.module("yaru22.angular-timeago").factory("nowTime",["$interval","timeAgo","timeAgoSettings",function(e,r,n){function t(){o=Date.now()}var o;return t(),e(t,n.refreshMillis),function(){return o}}]),angular.module("yaru22.angular-timeago").constant("timeAgoSettings",{refreshMillis:1e3,allowFuture:!1,overrideLang:null,fullDateAfterSeconds:null,defaultFormat:"yyyy-MM-dd",strings:{},breakpoints:{secondsToMinute:60,secondsToMinutes:120,minutesToHour:60,minutesToHours:90,hoursToDay:24,hoursToDays:48,daysToMonth:30,daysToMonths:60,daysToYear:365,yearToYears:2}}),angular.module("yaru22.angular-timeago").directive("timeAgo",["timeAgo","nowTime",function(e,r){return{scope:{fromTime:"@",format:"@"},restrict:"EA",link:function(n,t){var o;n.$watch("fromTime",function(){o=null,n.fromTime&&(o=e.parse(n.fromTime))}),n.$watch(function(){return o?r()-o:null},function(r){var a="";r&&(a=e.inWords(r,o,n.format)),angular.element(t).text(a)})}}}]),angular.module("yaru22.angular-timeago").factory("timeAgo",["$filter","timeAgoSettings",function(e,r){var n={};return n.inWords=function(n,t,o,a){function u(e,r){r=Math.floor(r);var t=angular.isFunction(e)?e(r,n):e,o=m.numbers&&m.numbers[r]||r;return t.replace(/%d/i,o)}o=o||r.defaultFormat;var i=parseInt(r.fullDateAfterSeconds,10);if(!isNaN(i)){var s=1e3*i;if(n>=0&&s<=n||n<0&&s>=n)return o?e("date")(t,o,a):t}var l,m,f=r.overrideLang,d=document.documentElement.lang,c=r.strings;void 0!==c[f]?(l=f,m=c[f]):void 0!==c[d]?(l=d,m=c[d]):m=c[l="en_US"];var g=m.prefixAgo,y=m.suffixAgo;r.allowFuture&&n<0&&(g=m.prefixFromNow,y=m.suffixFromNow);var T=Math.abs(n)/1e3,p=T/60,h=p/60,v=h/24,w=v/365,M=r.breakpoints,A=T<M.secondsToMinute&&u(m.seconds,T)||T<M.secondsToMinutes&&u(m.minute,1)||p<M.minutesToHour&&u(m.minutes,p)||p<M.minutesToHours&&u(m.hour,1)||h<M.hoursToDay&&u(m.hours,h)||h<M.hoursToDays&&u(m.day,1)||v<M.daysToMonth&&u(m.days,v)||v<M.daysToMonths&&u(m.month,1)||v<M.daysToYear&&u(m.months,v/30)||w<M.yearToYears&&u(m.year,1)||u(m.years,w),D=void 0===m.wordSeparator?" ":m.wordSeparator;return"he_IL"===l?[g,y,A].join(D).trim():[g,A,y].join(D).trim()},n.parse=function(e){if(e instanceof Date)return e;if("undefined"!=typeof moment&&moment.isMoment(e))return e.toDate();if(angular.isNumber(e))return new Date(e);if(/^\d+$/.test(e))return new Date(parseInt(e,10));var r=(e||"").trim();return r=r.replace(/\.\d+/,""),r=r.replace(/-/,"/").replace(/-/,"/"),r=r.replace(/T/," ").replace(/Z/," UTC"),r=r.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(r)},n}]),angular.module("yaru22.angular-timeago").filter("timeAgo",["nowTime","timeAgo",function(e,r){function n(n,t,o){if(n){var a=r.parse(n),u=e()-a;return r.inWords(u,a,t,o)}return null}return n.$stateful=!0,n}]);